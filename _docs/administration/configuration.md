---
title: Setup and Configuration Documentation
description: This documentation is designed to guide an administrator how to setup and configure any of the Tripalcultivate modules so that it is ready for data curators and site users.
---
# Setup and Configuration

***We are actively working to write documentation for this page as functionality is being developed. If you require more information on what to expect in this section, please feel free to [open a discussion on Github!](https://github.com/orgs/TripalCultivate/discussions)***

**Configure Tripal Cultivate Phenotypes Module**

Getting to configuration menu:
----

![image](https://github.com/TripalCultivate/docs/assets/15472253/72b499e1-d8cf-4025-9234-68b0e5d5fdcf)

With the appropriate permission, click on Tripal -> Extensions menu in the top main menu as shown in the screenshot above (marked No. 1). All Tripal 4 compatible modules will be listed in this page. Locate and click the link Tripal Cultivate Phenotypes Configuration (marked No. 2) to load a detailed listing of configuration pages available.

![image](https://github.com/TripalCultivate/docs/assets/15472253/2955244f-2e1d-4fe1-bbc5-416cbaf7a61b)

Configuration Menu Options
----

1. **R TRANSFORMATION RULES**
Tripal Cultivate Phenotypes can transform trait names or values for easy use in R (both in R Studio or R Shiny applications) for statistical computing. Use this configuration page to define standard transformation rules to apply to trait or string values when formatting them for use in R.

3. **WATERMARK CHART**
Every diagram generated by Tripal Cultivate Phenotypes can be superimposed with personalized logo or text logo to ensure proper credit and indicate authenticity. Use Watermark Chart configuration to set watermarking scheme of modules.

4. **ONTOLOGY TERMS**
Tripal Cultivate Phenotypes is designed to house phenotypic traits, methods and units in genus-specific Controlled Vocabularies (CV). You need to use this configuration page to set these for your genus before uploading data. You can also indicate if you want to allow insert of trait, methods and units as they are used in the phenotypic data importers or restrict insert to the Trait Importer for greater control. Additionally, we allow you to indicate the terms used to describe specific types and relationships in your data. We have default terms configured but this page also allows you to choose specific terms that best support your data.

Switch Configuration Pages
----

Navigate from one configuration to another by using the top page tabs as shown in the screenshot below (marked No. 1).

![navigate config](https://github.com/TripalCultivate/docs/assets/15472253/e64ee0a6-afa6-4e64-a421-4de413bc91e9)

**CONFIGURING R TRANSFORMATION RULES**
----

![R transformation rules](https://github.com/TripalCultivate/docs/assets/15472253/d05f68aa-a3bc-4469-a2cb-508239044ec8)

The R Transformation Rules configuration page simplifies the conversion of trait/terms into names compatible with R language, by emulating the language's variable names transformation methods. This is achieved by specifying words and/or special characters to exclude, along with a specific word replacement.

For example, if you have a trait name "Days till 50% of plants have at least one open flower" and you want the R transformed version to be Days.50percent.1openflower then these are the transformation rules that you will need: 

- Words to remove: plants,have,at, least 
- Character to remove: %, 
- Match and replace: one = 1


The configuration is preloaded with predefined values.

**To update values**

NOTE: Each value must be separated by a comma symbol.

1. Enter words to remove into List of words to remove field (marked No. 1 in the screenshot above).
2. Enter special characters to remove into List of special characters to remove field (marked No. 2).
3. Enter pair of word/characters delimited by an = sign where the character in the left will be searched and replaced with the character on the right (marked No. 3)
4. Click Save Configuration button to save. Each of the three fields can be individually edited, but remember to save your changes afterwards. 

{% include alert.html type="warning" title="The rules you configure here will be applied to all trait, method and unit names when formatting for use with R. As such, remember to keep them generic and more universally applicable." %}

**CONFIGURING WATERMARK CHART**
----

![watermark chart](https://github.com/TripalCultivate/docs/assets/15472253/d8aae9a3-0641-43ae-a4a9-cd3fa0d12772)

In Watermark Chart configuration, you can establish a configuration for watermarking charts as a means to acknowledge the data sources used in visualizations.

NOTE: Users with advanced HTML/CSS knowledge will be able to remove the watermark image. Please take additional steps to protect your data if you are concerned. 

To watermark charts:

1. Under Choose which chart to watermark radio buttons, select Watermark all charts as shown by the screenshot above (marked No. 1).
2. A file field will become available to allow for upload of a watermark image file (PNG file). Click browse and navigate to the file and click open in the file browser window (marked No. 2 and No. 3).
3. Click Save configuration to set the watermark to the file. If a watermark file was previously uploaded, this will be replaced with the new file.
4. Once the file is uploaded a preview of the watermark will appear in the gray area.

TIP: Use PNG file with reduced opacity and a transparent background so as not to obstruct section of chart/graph.

To remove watermark

1. Select Do not watermark any charts under Choose which chart to watermark radio buttons.
2. Click Save configuration.

CONFIGURE ONTOLOGY TERMS
----

![ontology configuration](https://github.com/TripalCultivate/docs/assets/15472253/12a6f2fe-da4e-4845-9b83-317a6800ff0e)

The Tripal Cultivate Phenotypes module utilizes a specific set of controlled vocabulary as metadata to establish connections and determine configuration values. Furthermore, the module organizes phenotypic data based on genus and experiment.

NOTE: This module requires that Drupal/Tripal site has records in the organism table.

WARNING: Once Phenotypic Data has been uploaded for a genus, these vocabularies CANNOT be changed! Please take the time to read the descriptions below and ensure to select terms applicable in your research. 

**Configurre Trait Ontologies - Trait Vocabulary, Associated Database and Crop Ontology**

1. Click the the title Trait Ontologyes - Trait Vocabulary, Associated Databse and Crop Ontology as shown in the screenshot above (marked No. 1).

![genus ontology configuration](https://github.com/TripalCultivate/docs/assets/15472253/ad0ca6e3-97de-4973-80e7-363bc7c5239b)

**The Trait Ontologies Configuration**
Set the Controlled Vocabulary (CV), Database (DB) and Crop Ontology to be used when creating phenotypic trait, method and unit under an organism (genus).

To configure a genus:

1. Each genus will be set up to include Trait Vocabularies, an Associated Database, and Crop Ontology. The details for each configuration entry are outlined in the description area (top region), as indicated in the screenshot above (marked No. 1).
2. Genus from the organism table is presented in the summary table (marked No.2) where each configuration entry is linked to a selection box that corresponds to a specific configuration.
3. Set the Controlled Vocabulary under Trait Vocabularies column to specify the Trait, Method and Unit.
4. Set the Database selection box under Associated Database column.
5. Set the Crop Ontology selection box under Crop Ontology column.
6. Specify, for all genus configurations, whether to permit the saving of newly detected traits in the phenotypic importer or not. Setting this option to TRUE (checked) will enable data collector to include new traits, method and unit in the data file (marked No. 3).

NOTE: Setting "Allow new traits to be added during upload" option to FALSE (unchecked), a validation error will be triggered when an unrecognized trait is detected in the data file.

7. Click Save configuration button (marked No. 4) to save all configuration values for a genus.

**The Controlled Vocabulary Terms - Property/Relationship Types and Measurement Metadata**

1. Click the the title Controlled Vocabulary Terms - Property/Relationship Types and Measurement Metadata (marked No. 2 in the main configuration page screenshot).

The Tripal Cultivate Phenotype module comes with pre-installed Controlled Vocabulary Terms, providing predefined terms to facilitate the initiation of data collection after installation. However, the terms can be reconfigured to another term that best support your data and project setup.

WARNING: Once Phenotypic Data has been uploaded for a genus, these vocabularies CANNOT be changed! Please take the time to read the descriptions below and ensure to select terms applicable in your research. 


To alter a term:

1. Ensure that vocabulary term is created in cvterm table prior to changing a value.
2. Select a field corresponding a term to modify and clear the field value.
3. Once the field is clear, begin typing the term name and inspect the terms suggested matching the characters entered so far, as shown in the screenshot below (marked No. 1).

![image](https://github.com/TripalCultivate/docs/assets/15472253/a0aaa8c9-0c40-4833-a5db-cea325835972)

4. When an exact match of the target term is found, click the term to set the field value.
5. Click Save configuration to save.

